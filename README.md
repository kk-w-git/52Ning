# åšå®¢ç³»ç»Ÿ - å…¨æ ˆå­¦ä¹ é¡¹ç›®

ä¸€ä¸ªåŸºäº Node.js + Express + MongoDB + React + TypeScript çš„å…¨æ ˆåšå®¢ç³»ç»Ÿï¼Œé€‚åˆå­¦ä¹ æœåŠ¡ç«¯å¼€å‘å’Œéƒ¨ç½²ã€‚

## ğŸ“‹ é¡¹ç›®ç‰¹æ€§

### å·²å®ç°åŠŸèƒ½
- âœ… ç”¨æˆ·è®¤è¯ï¼ˆJWTï¼‰
- âœ… æ–‡ç«  CRUD æ“ä½œ
- âœ… æ–‡ä»¶ä¸Šä¼ ï¼ˆå›¾ç‰‡ï¼‰
- âœ… è¯„è®ºç³»ç»Ÿ
- âœ… ç‚¹èµåŠŸèƒ½
- âœ… åˆ†é¡µæŸ¥è¯¢
- âœ… æœç´¢åŠŸèƒ½
- âœ… åˆ†ç±»ç­›é€‰
- âœ… æ ‡ç­¾ç³»ç»Ÿ
- âœ… ç”¨æˆ·èµ„æ–™ç®¡ç†

### æŠ€æœ¯æ ˆ

**åç«¯ï¼š**
- Node.js
- Express
- MongoDB + Mongoose
- JWT è®¤è¯
- Multerï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
- bcryptjsï¼ˆå¯†ç åŠ å¯†ï¼‰

**å‰ç«¯ï¼š**
- React 18
- TypeScript
- Vite
- React Router
- Zustandï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
- Axios
- TailwindCSS
- React Quillï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰
- React Hot Toastï¼ˆé€šçŸ¥ï¼‰

**éƒ¨ç½²ï¼š**
- PM2ï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰
- Nginxï¼ˆåå‘ä»£ç†ï¼‰
- MongoDBï¼ˆæ•°æ®åº“ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18
- MongoDB >= 6.0
- npm æˆ– yarn

### æœ¬åœ°å¼€å‘

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <your-repo-url>
cd my-nodejs-blog
```

#### 2. å®‰è£…åç«¯ä¾èµ–å¹¶å¯åŠ¨
```bash
cd server
npm install

# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶å¹¶é…ç½®
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

åç«¯æœåŠ¡å°†åœ¨ http://localhost:5000 è¿è¡Œ

#### 3. å®‰è£…å‰ç«¯ä¾èµ–å¹¶å¯åŠ¨
```bash
cd ../client
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ http://localhost:5173 è¿è¡Œ

## ğŸ“ é¡¹ç›®ç»“æ„

```
my-nodejs-blog/
â”œâ”€â”€ server/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/        # é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹ï¼ˆUser, Postï¼‰
â”‚   â”‚   â”œâ”€â”€ routes/        # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ middleware/    # ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€é”™è¯¯å¤„ç†ç­‰ï¼‰
â”‚   â”‚   â””â”€â”€ index.js       # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ uploads/           # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ .env.example       # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ client/                # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/         # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ App.tsx        # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ deployment/            # éƒ¨ç½²é…ç½®
    â”œâ”€â”€ nginx.conf         # Nginx é…ç½®ç¤ºä¾‹
    â”œâ”€â”€ deploy.sh          # éƒ¨ç½²è„šæœ¬
    â””â”€â”€ SERVER_SETUP.md    # æœåŠ¡å™¨é…ç½®æŒ‡å—
```

## ğŸ”Œ API æ¥å£

### è®¤è¯æ¥å£
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### æ–‡ç« æ¥å£
- `GET /api/posts` - è·å–æ–‡ç« åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰
- `GET /api/posts/:id` - è·å–æ–‡ç« è¯¦æƒ…
- `POST /api/posts` - åˆ›å»ºæ–‡ç« ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `PUT /api/posts/:id` - æ›´æ–°æ–‡ç« ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `DELETE /api/posts/:id` - åˆ é™¤æ–‡ç« ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/posts/:id/like` - ç‚¹èµ/å–æ¶ˆç‚¹èµï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/posts/:id/comments` - æ·»åŠ è¯„è®ºï¼ˆéœ€è¦è®¤è¯ï¼‰
- `DELETE /api/posts/:id/comments/:commentId` - åˆ é™¤è¯„è®ºï¼ˆéœ€è¦è®¤è¯ï¼‰

### ç”¨æˆ·æ¥å£
- `GET /api/users/:id` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/users/profile` - æ›´æ–°ä¸ªäººèµ„æ–™ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/users/:id/posts` - è·å–ç”¨æˆ·çš„æ–‡ç« åˆ—è¡¨

### ä¸Šä¼ æ¥å£
- `POST /api/upload` - ä¸Šä¼ å•ä¸ªå›¾ç‰‡ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/upload/multiple` - ä¸Šä¼ å¤šä¸ªå›¾ç‰‡ï¼ˆéœ€è¦è®¤è¯ï¼‰

## ğŸ¯ å­¦ä¹ è·¯çº¿

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
- [x] é¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€æ¡†æ¶æ­å»º
- [x] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [x] æ–‡ç«  CRUD
- [x] æ–‡ä»¶ä¸Šä¼ 
- [x] å‰ç«¯ç•Œé¢å¼€å‘

### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆä½ æ¥å®ç°ï¼‰
- [ ] å®ç°ç”¨æˆ·å…³æ³¨åŠŸèƒ½
- [ ] æ·»åŠ æ–‡ç« è‰ç¨¿åŠŸèƒ½
- [ ] å®ç°å®æ—¶é€šçŸ¥ç³»ç»Ÿï¼ˆSocket.ioï¼‰
- [ ] æ·»åŠ  Markdown ç¼–è¾‘å™¨æ”¯æŒ
- [ ] å®ç°å…¨æ–‡æœç´¢ï¼ˆElasticsearchï¼‰
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜ï¼ˆRedisï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼šä¼˜åŒ–å’Œéƒ¨ç½²ï¼ˆä½ æ¥å®è·µï¼‰
- [ ] API é™æµå’Œé˜²æŠ¤
- [ ] å›¾ç‰‡å‹ç¼©å’Œ CDN
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [ ] CI/CD é…ç½®
- [ ] ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ

## ğŸš€ éƒ¨ç½²åˆ° VPS

è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤è¯·æŸ¥çœ‹ [deployment/SERVER_SETUP.md](deployment/SERVER_SETUP.md)

### å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡ VPS æœåŠ¡å™¨**
   - å®‰è£… Node.jsã€MongoDBã€Nginxã€PM2

2. **é…ç½®ç¯å¢ƒ**
   ```bash
   # å…‹éš†ä»£ç 
   git clone <your-repo> /var/www/blog
   cd /var/www/blog
   
   # åç«¯é…ç½®
   cd server
   npm install --production
   cp .env.example .env
   # ç¼–è¾‘ .env é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
   
   # ä½¿ç”¨ PM2 å¯åŠ¨
   pm2 start ecosystem.config.js
   pm2 save
   ```

3. **æ„å»ºå‰ç«¯**
   ```bash
   cd ../client
   npm install
   npm run build
   ```

4. **é…ç½® Nginx**
   ```bash
   sudo cp deployment/nginx.conf /etc/nginx/sites-available/blog
   sudo ln -s /etc/nginx/sites-available/blog /etc/nginx/sites-enabled/
   sudo nginx -t
   sudo systemctl restart nginx
   ```

5. **é…ç½® SSLï¼ˆå¯é€‰ä½†æ¨èï¼‰**
   ```bash
   sudo certbot --nginx -d your-domain.com
   ```

## ğŸ“š å­¦ä¹ å»ºè®®

### åç«¯å¼€å‘å­¦ä¹ é‡ç‚¹

1. **Express æ¡†æ¶**
   - è·¯ç”±è®¾è®¡
   - ä¸­é—´ä»¶æœºåˆ¶
   - é”™è¯¯å¤„ç†

2. **MongoDB æ•°æ®åº“**
   - æ•°æ®æ¨¡å‹è®¾è®¡
   - æŸ¥è¯¢ä¼˜åŒ–
   - ç´¢å¼•ä½¿ç”¨

3. **JWT è®¤è¯**
   - Token ç”Ÿæˆå’ŒéªŒè¯
   - æƒé™æ§åˆ¶
   - å®‰å…¨æ€§è€ƒè™‘

4. **æ–‡ä»¶å¤„ç†**
   - Multer é…ç½®
   - æ–‡ä»¶éªŒè¯
   - å­˜å‚¨ç­–ç•¥

### æœåŠ¡å™¨è¿ç»´å­¦ä¹ é‡ç‚¹

1. **Linux åŸºç¡€**
   - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
   - ç”¨æˆ·æƒé™ç®¡ç†
   - è¿›ç¨‹ç®¡ç†

2. **Nginx**
   - åå‘ä»£ç†é…ç½®
   - é™æ€æ–‡ä»¶æœåŠ¡
   - SSL è¯ä¹¦é…ç½®

3. **è¿›ç¨‹ç®¡ç†**
   - PM2 ä½¿ç”¨
   - æ—¥å¿—ç®¡ç†
   - è‡ªåŠ¨é‡å¯

4. **å®‰å…¨é˜²æŠ¤**
   - é˜²ç«å¢™é…ç½®
   - SSH å®‰å…¨
   - å¤‡ä»½ç­–ç•¥

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT

## ğŸ”— ç›¸å…³èµ„æº

- [Node.js å®˜æ–¹æ–‡æ¡£](https://nodejs.org/docs)
- [Express å®˜æ–¹æ–‡æ¡£](https://expressjs.com/)
- [MongoDB å®˜æ–¹æ–‡æ¡£](https://docs.mongodb.com/)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Nginx å®˜æ–¹æ–‡æ¡£](https://nginx.org/en/docs/)
- [PM2 å®˜æ–¹æ–‡æ¡£](https://pm2.keymetrics.io/)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒåŠ¡å¿…ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†é’¥å’Œæ•æ„Ÿä¿¡æ¯
2. å®šæœŸå¤‡ä»½æ•°æ®åº“
3. ä¿æŒä¾èµ–åŒ…æ›´æ–°ä»¥è·å¾—å®‰å…¨è¡¥ä¸
4. ä½¿ç”¨ HTTPS ä¿æŠ¤æ•°æ®ä¼ è¾“
5. å®æ–½é€‚å½“çš„æ—¥å¿—è®°å½•å’Œç›‘æ§
6. é™åˆ¶ API è¯·æ±‚é¢‘ç‡ä»¥é˜²æ­¢æ»¥ç”¨

---

ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼ğŸ‰
